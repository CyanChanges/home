---
import { type CollectionEntry, getCollection } from 'astro:content';
import BlogPost from '../../components/BlogPost.astro';
import BaseHead from "../../components/BaseHead.astro";
import { ViewTransitions } from 'astro:transitions';
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";

export async function getStaticPaths() {
	const posts = await getCollection('blog');
	return posts.map((post) => ({
		params: { slug: post.slug },
		props: post,
	}));
}
type Props = CollectionEntry<'blog'>;

const post = Astro.props;
const { Content } = await post.render();
---
<head>
	<BaseHead title={post.data.title} description={post.data.description} />
	<style>
		main {
			width: calc(100% - 2em);
			max-width: 100%;
			margin: 0;
		}
		.hero-image {
			width: 100%;
		}
		.hero-image img {
			display: block;
			margin: 0 auto;
			border-radius: 12px;
			box-shadow: var(--box-shadow);
		}
		.prose {
			width: 720px;
			max-width: calc(100% - 2em);
			margin: auto;
			padding: 1em;
			color: rgb(var(--gray-dark));
		}
		.title {
			margin-bottom: 1em;
			padding: 1em 0;
			text-align: center;
			line-height: 1;
		}
		.title h1 {
			margin: 0 0 0.5em 0;
		}
		.date {
			margin-bottom: 0.5em;
			color: rgb(var(--gray));
		}
		.last-updated-on {
			font-style: italic;
		}
	</style>
	<ViewTransitions />
</head>

<body>
<Header />
<main id="main">
	<BlogPost {...post.data}>
		<Content />
	</BlogPost>
</main>
<Footer />
</body>

